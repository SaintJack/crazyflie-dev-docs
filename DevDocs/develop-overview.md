# 开发总览

# 开发快速链接

Crazyflie有很多部分可以开发，在深入研究之前，了解系统如何与仪表相匹配是很重要的。以下是一些对发展很重要的重要地方的快速链接。



**The Eco-System** ——阅读项目、API、体系结构、协议和其他技术细节。

**Repository overview**-从我们生态系统的每个元素和方面来看，都有github存储库，并提供详细的文档。

**Support channels** –知道遇到麻烦时在哪里寻求支持。

**Github**–软件和硬件的所有源代码列表。在这里，您可以与社区分享您的工作。

**开发入门教程**–一个循序渐进的指南，用于设置您的开发环境，构建您的第一个自定义固件并将其下载到直升机上。

**贡献你的工作**-开源就是分享和关心！如果您希望您的代码被更多代人保留和使用，请将您的工作贡献回我们的代码库。



## 编程语言

不同的系统使用不同的语言。因此，如果您正在考虑使用特定的编程语言，以下是我们的存储库概述中最常见的语言：

**Python语言**的Crazyflie PC API和客户端

**C语言**的Crazyradio和Crazyflie固件(Firmware)

其他语言查看外部项目以获得**其他编程语言支持语言**支持。

请确保使用我们的语言编码标准，如果您想将代码贡献回我们的固件/软件，这一点非常重要。



## 通信框架

**Crazyflie Native Framework**：我们维护自己的存储库，了解如何与Crazyflie进行通信。查看我们的存储库概述。

**ROS2**：查看Crazyswamp2项目！

**其他框架**：查看**外部项目**，了解我们社区的其他框架和自动驾驶支持。



## API、版本和基础代码的演进

Crazyflie生态系统中有多个级别的API，有些可能很明显，而另一些则更微妙。有些API是有文档和版本控制，而在其他情况下还有改进的空间。

由于所有代码都可以由程序员使用，因此一种观点是，所有函数和协议都是API，如果没有某种形式的版本更改，就不应该更改。为了使我们能够管理和改进代码库，我们选择了一些领域（API），我们将以结构化的方式进行更新（见下文）。不属于这些API的代码可以随时更改，我们认为这对于保持系统动态和随时间发展是必要的。

以结构化的方式管理API的目的是帮助开发人员了解一个协议或一组功能是否可能随着时间的推移而发生变化，以及它是否会破坏应用程序。还应该能够检测API是否发生了更改（以及如何更改），以及需要对代码进行哪些更改才能使应用程序正常工作。

## 更新过程和弃用

可以使用版本号进行版本控制的区域，例如协议，应该在发生更改时更新版本号。查看特定区域/协议的文档，查看是否有针对该区域的特定更新策略。**CRTP**就是一个例子。

对于代码库中的函数，并不总是有一个与函数相关的版本号（除了发布版本），它清楚地“告诉”程序员是否有API中断。我们使用的方法是将要删除的函数标记为已弃用。不推荐使用的函数将继续存在，并在被删除之前至少工作6个月。发行说明中记录了不推荐的功能，以提醒您在将来的发行版中将删除这些功能。弃用标记通常是通过在函数文档中添加单词“弃用”来完成的。此外，还应添加删除该函数的日期（最早），以及（如果适用）要使用的替换函数或如何更改代码。



举例：

```C
/**
 * @brief Deprecated (removed after August 2023). Use the "deck.bcLoco" parameter instead.
 *
 * Nonzero if [Loco positioning deck](https://store.bitcraze.io/products/loco-positioning-deck) is attached
 */
PARAM_ADD_CORE(PARAM_UINT8 | PARAM_RONLY, bcDWM1000, &isInit)
```

## 开发主题

Crazyflie平台不仅仅是一个四旋翼机。它由许多不同的部件组成，这些部件协同工作以完成系统。这意味着开发人员可以深入到任何给定的领域进行实验、学习和改进。

以下是您可以探索的几个领域的示例：

**飞行稳定性：**

​	***传感器**：该平台由许多不同的传感器组成。所有这些都需要信号处理和调谐以优化性能。

​	***传感器融合：**所有传感器的输出融合在一起，以创建平台方向的最佳测量。

​	***控制理论：**该平台由许多不同的控制回路组成。既用于控制Crazyflie上的滚转/俯仰/偏航，也用于控制使用外部定位系统的平台。



**通信**

​	***无线电协议：**Crazyflie通过无线电与主机通信。该协议非常基本，但有可能通过更多功能进行扩展。

​	***USB：**Crazyradio使用USB设备与主机实时系统通信：Crazyflie固件非常耗时。

**定位**   我们有许多定位系统，如Loco定位系统、灯塔系统和对mocap系统的支持。定位的质量总是可以提高的。

**自主控制**

*PC  通过python库计算机可以控制Crazyfie

*板载：应用层可在Crazyflie上实现板载自主控制。

检出(check out)存储库概述文档以获得更多灵感，尤其是crazyflie固件



## 开发工具和开发环境

尽管我们详细介绍了如何为Crazyflie平台设置不同的开发环境，但这可能会很麻烦。在这里，我们将提供一份可用于简化开发的工具列表：

​	***虚拟机：**我们为您提供一个预编译的虚拟机，其完整的开发环境已经预先安装。在“安装在虚拟机上”下开始使用Crazyflie 2.X显示了如何在计算机上安装虚拟机的安装说明。

​	***Toolbelt：**Toolbelt是一种用于运行测试和构建软件模块的工具的实用程序。有关更多信息，请参阅工具带文档

​	***本机安装：**这意味着您希望在本机上从头开始设置开发环境。您应该检出存储库概述，转到要为其开发的生态系统部分，并按照文档中的安装和设置说明进行操作。

此外，请检查我们在Bitcraze内部使用的开源工具，以获得您想要在案例中使用的灵感。

[Open Source Tools](https://www.bitcraze.io/about/credits/)



## Crazyflie特性

由于Crazyflie平台旨在用于实验和开发，我们希望加入一些功能，使其更容易实现。

无线电引导加载程序允许通过无线电将固件下载并闪烁到Crazyflie，因此不需要JTAG程序员。然而，对于片上调试，Crazyflie仍然有一个JTAG适配器，供那些真正想深入研究的人使用。

此外，参数和日志框架使开发人员能够轻松地定义变量的特殊用途。并且这些参数用于实时改变Crazyflie中的变量。

在产品页面上查看Crazyflie的所有功能和规格。

[Crazyflie Product Page](https://www.bitcraze.io/products/crazyflie-2-1/)



## 社区

我们所有的项目都是开放的，托管在GitHub上。在这里，您还可以建议新功能、报告问题并查找需要修复的当前问题。除此之外，我们还拥有一个[活跃的讨论页面](https://discussions.bitcraze.io/)，该页面主要用于支持，但也可以开始讨论。

您可以使用社区讨论您的贡献，并与社区共享您的代码。这就是开源世界的全部内容！



[Community Contributions](https://www.bitcraze.io/development/contribute/)